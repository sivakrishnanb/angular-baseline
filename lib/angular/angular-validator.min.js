angular.module("angularValidator",[]),angular.module("angularValidator").directive("angularValidator",["$timeout","$window",function(a){return{restrict:"A",link:function(b,c){function d(a){for(var b=0;b<a.length;b++)b in a&&e(a[b])}function e(a){"validate-on"in a.attributes&&"blur"===a.attributes["validate-on"].value&&angular.element(a).on("blur",function(){h(a),k(a)}),b.$watch(function(){return a.value+m.submitted+g(a)+f(m[a.name])},function(){"validate-on"in a.attributes&&"dirty"===a.attributes["validate-on"].value?(h(a),k(a)):(m.submitted||m[a.name]&&m[a.name].$valid)&&(h(a),k(a))})}function f(a){return a&&"$dirty"in a?a.$dirty:void 0}function g(a){if("validator"in a.attributes){var c=b.$eval(a.attributes.validator.value);return m[a.name]&&m[a.name].$setValidity("angularValidator",c),c}}function h(a){var c=function(){return"<i class='fa fa-times'></i> Required"},d=function(){return"<i class='fa fa-times'></i> Invalid"};if(a.name in m){var e=m[a.name];if(e.$dirty||b[l.name].submitted){var f=j(a);f&&f.remove(),e.$error.required?angular.element(a).after("required-message"in a.attributes?i(a.attributes["required-message"].value):i(c)):e.$valid||angular.element(a).after("invalid-message"in a.attributes?i(a.attributes["invalid-message"].value):i(d))}}}function i(a){return"<label class='control-label has-error validationMessage'>"+b.$eval(a)+"</label>"}function j(a){for(var b=angular.element(a).parent().children(),c=0;c<b.length;c++)if(angular.element(b[c]).hasClass("validationMessage"))return angular.element(b[c]);return!1}function k(a){if(a.name in m){var c=m[a.name];(c.$dirty||b[l.name].submitted)&&(c.$valid?(angular.element(a.parentNode).removeClass("has-error"),angular.element(a).removeClass("has-error")):c.$invalid&&(angular.element(a.parentNode).addClass("has-error"),angular.element(a).addClass("has-error")))}}var l=angular.element(c)[0],m=b[l.name];m.submitted=!1,c.on("submit",function(a){a.preventDefault(),d(l),b.$apply(function(){m.submitted=!0}),m.$valid?b.$apply(function(){b.$eval(l.attributes["angular-validator-submit"].value)}):$(l).find("input,textarea,select").filter(".has-error:first").focus()}),a(function(){d(l)})}}}]);